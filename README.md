[合集 \- GIS数据收集(21\)](https://github.com)[1\.全球各类卫星遥感图像的下载方法汇总01\-01](https://github.com/fkxxgis/p/17938671)[2\.GIS数据下载合集：遥感、土壤、气象、行政区数据...2023\-01\-11](https://github.com/fkxxgis/p/17044278.html)[3\.Earthdata批量下载MODIS遥感影像的方法2023\-01\-14](https://github.com/fkxxgis/p/17052751.html)[4\.批量下载Landsat遥感影像的方法2023\-03\-02](https://github.com/fkxxgis/p/17171361.html)[5\.全球都有哪些高光谱遥感卫星？2023\-08\-19](https://github.com/fkxxgis/p/17642359.html)[6\.叶绿素含量测定仪SPAD\-502怎么使用？2023\-07\-29](https://github.com/fkxxgis/p/17589360.html)[7\.批量下载MODIS遥感影像：基于LAADS DAAC的方法2023\-03\-08](https://github.com/fkxxgis/p/17192484.html)[8\.Landsat数据在USGS中无法下载Surface Reflectance产品的解决方法2023\-03\-03](https://github.com/fkxxgis/p/17176247.html)[9\.Landsat 7的热红外波段有2个该如何选择？03\-10](https://github.com/fkxxgis/p/18063761)[10\.Python基于Excel生成矢量图层及属性表信息：ArcPy03\-20](https://github.com/fkxxgis/p/18084738)[11\.ArcMap的mxd文件没有数据、显示感叹号怎么办？03\-22](https://github.com/fkxxgis/p/18088768)[12\.Postman模拟浏览器网页请求并获取网页数据04\-03](https://github.com/fkxxgis/p/18112668)[13\.Python依据遥感影像的分幅筛选出对应的栅格文件06\-01](https://github.com/fkxxgis/p/18225883):[蓝猫加速器配置下载](https://yunbeijia.com)[14\.导出谷歌地图提供的各类地图可视化样式的方法06\-04](https://github.com/fkxxgis/p/18230531)[15\.GIS数据获取：气象数据免费下载网站06\-21](https://github.com/fkxxgis/p/18260543)[16\.GIS数据获取：土地利用与土壤属性、DEM、水体水系数据06\-25](https://github.com/fkxxgis/p/18267371)[17\.基于FileZilla上传、下载服务器数据的方法07\-09](https://github.com/fkxxgis/p/18292769)[18\.12米空间分辨率DEM数据申请下载：TanDEM\-X数据集08\-21](https://github.com/fkxxgis/p/18371636)[19\.查找大量时序遥感文件缺失、不连贯的成像日期：Python代码10\-14](https://github.com/fkxxgis/p/18463655)[20\.批量计算遥感影像NDVI：Python代码11\-09](https://github.com/fkxxgis/p/18536887)21\.全球气象数据ERA5的下载方法12\-04收起
  本文介绍在**ERA5**气象数据的官方网站中，**手动**下载、**Python**代码自动批量下载**逐小时**、**逐日**与**逐月**的**ERA5**气象数据各类产品的快捷方法。


  **ERA5**（fifth generation ECMWF atmospheric reanalysis of the global climate）是由**欧洲中期天气预报中心**（European Centre for Medium\-Range Weather Forecasts，**ECMWF**）开发和维护的一种全球范围内的高分辨率**大气再分析数据集**，提供了多种气象和气候变量的连续、一致和高质量的数据。**ERA5**基于全球观测数据、数值模型和物理参数化方案，通过数据同化和数值模拟的技术，对过去数十年（`1940`年至今）的天气状况进行再构建和模拟，从而生成了高时空分辨率的大气和地表变量数据。**ERA5**提供了广泛的气象和气候变量，包括温度、湿度、风速、降水、云量、地表辐射等。这些数据以固定的时间间隔（**逐小时**或**逐月**）和空间分辨率（从数公里到数十公里）提供，可以用于气候研究、天气分析、气候模型验证、环境监测等众多应用领域。


  我们可以通过**ERA5**的**官方网站**，或者在**谷歌地球引擎**等平台中，下载这一气象数据。由于在谷歌地球引擎中下载这一数据相对而言比较麻烦，而且速度也并不算友好，我们这里就主要介绍一下基于其**官方网站**，通过**手动下载**、**Python代码下载**等`2`种方式，下载不同**ERA5**数据产品的方法。


  首先，需要明确，我们一般常用的**ERA5**数据产品包括[ERA5](https://github.com)和[ERA5\-Land](https://github.com)等`2`种；其中，前者**ERA5**包含全球全部区域，而后者**ERA5\-Land**仅包含全球的**陆地**区域，但是后者的空间分辨率（最高是`0.1` °）要高于前者（最高为`0.25` °）。其次，在**ERA5**的官方网站，无论是上述的**ERA5**数据，还是**ERA5\-Land**数据，我们通过**手动下载**或者**代码下载**的方式，都只能直接下载到**逐小时**或**逐月**的气象数据；如果需要**逐日**的数据，大家可以在其官方网站提供的[逐日统计数据计算工具](https://github.com)中加以自动计算后手动下载，或者是在**GEE**中下载，再或者就是先下载**逐小时**的数据，然后自行撰写代码批量计算**逐日**或者**其他时间分辨率**的数据。当然，也还有一种用**Python**代码批量下载**逐日**数据的方法，但是那个方法的速度受到网络情况影响，我发现还不如我手动下载来得快，所以这里就没有介绍；之后如果用到这个代码了，就再和大家介绍一下。


  同时，应该是在`2024`年的`09`月，**ERA5**数据官方网站做了改版，所以本文中的截图有些和目前最新的网站可能有些不一致，但是整体操作流程是一样的。后期我也会再更新一下本文中的截图和具体细节部分。


# 0 准备工作


  需要注意，只要不是选择用上述**逐日统计数据计算工具**来下载数据，那么无论我们选择**手动下载**数据，还是用**Python**代码**批量下载**数据，都需要进行本部分的操作。


  首先，我们找到需要下载的数据首页，如下图所示。


![image](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223350897-207312041.png)


  其次，如果我们没有登录的话，需要在上图右上角所示的位置登录或者注册一下账号。如下图所示，我这里就新注册一个账号。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336145-1295651502.png)


  完成注册后，需要在我们注册时填写的邮箱中激活一下账号，如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336135-1058848207.png)


  随后，登录账号即可；如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336148-2113991588.png)


  接下来，我们回到刚刚的数据首页中，选择“**Download data**”选项；如下图所示。随后，选择当前数据产品对应的产品类型，一般情况下，我们选择第一个，也就是“**Reanalysis**”选项就可以。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336142-1985097963.png)


  随后，选择我们需要的气象数据指标；可以在“**Popular**”这一栏选择用户常用的热门指标，也可以自己依据需要在下面的类别中搜索。如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336192-2025090367.png)


  接下来，选择我们需要的年份和日期、时刻。这里需要注意，对于不同的**ERA5**产品，其能一次性下载的数量也是不同的；如下图所示，我这张图下载的是**ERA5**数据，它就可以一次性选择**多年**、**多月**的数据；但是后面我下载**ERA5\-Land**数据，发现就不能多选年份和月份了，也就是说一次性只能下载**一年中一个月**的数据。这个可能是由于，**ERA5\-Land**数据的空间分辨率比较高，数据量更大，导致官方限制了**ERA5\-Land**数据的一次性下载的限额。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336436-1854086154.png)


  随后，选择我们要下载的数据的空间覆盖范围，并选择下载的数据格式（建议选择`NetCDF`格式）如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336498-521738276.png)


  随后，选择下图中左上方的“**Accept terms**”选项。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336437-868679609.png)


  至此，我们就完成了数据下载的准备部分工作。


# 1 手动下载


  首先，我们介绍一下手动下载的方法。手动下载其实就很简单了，在完成上一个“**Accept terms**”选项步骤之后，上图右下角就会变成下图右下角所示的“**Submit Form**”选项；选择这一项即可。这个的意思是，将我们前面配置好的下载信息作为一个请求，发给服务器，服务器只要处理好这个请求，我们就可以开始下载了。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336590-1065889956.png)


  随后，可以在新的界面中，看到我们刚刚发起的这个请求；如下图所示。需要注意的是，此时我们只是将请求发送给了官方网站的服务器，服务器还需要一段时间来处理我们的请求。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336491-2013691332.png)


  如下图所示，在提交了一个请求之后，我们可以用前文的方法再提交其他的请求；这些请求都在“**Your requests**”界面中有所显示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336490-1067643372.png)


  当服务器处理完毕我们的请求后，可以看到请求列表右侧出现了“**Download**”选项，点击它就可以下载数据了。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336539-702861411.png)


  一般情况下，服务器处理我们请求的时间是不一定的，受到所要下载数据的大小、服务器繁忙情况等影响；如下图所示，我这两个请求，一个是不到`200 MB`的数据，一个是不到`20 MB`的数据，分别经过了将近`1`个小时、`20`分钟才请求完毕、可以下载，这个速度不算很快。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336527-1827504768.png)


# 2 基于Python下载


  接下来，我们介绍一下基于**Python**代码**批量下载**数据的方法。


  首先，我们进入这个[网页](https://github.com)；这里需要注意，进入这个网页后，首先需要通过如下的超链接，重新注册一下；我感觉这个步骤的意义就是将我们注册好的**ERA5**官方网站账号再赋一个**API**权限。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336534-1927761455.png)


  其中，如下图所示，这里的“**Current password**”也要输入。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336549-576463746.png)


  随后，我们进入这个[网站](https://github.com)，并找到如下图所示的网页位置，将右侧黑色区域内的全部信息复制一下。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336504-1904722268.png)


  接下来，我们还需要配置一下**Python**代码中，用以下载**ERA5**数据的一个第三方库`cdsapi`，也就是**ERA5**官方开发的、专门用来供**Python**代码下载**ERA5**数据的库。


  配置`cdsapi`库也是很简单的。我们直接在**Python**环境的命令行中分别输入如下代码即可（如果大家没有**conda**环境的话，可以用`pip`来安装，具体方法参考**ERA5**的官方网站即可）。其中，第一句代码用于在**conda**的配置文件中添加一个新的软件源`channel`，即`conda-forge`；`conda-forge`是一个社区驱动的软件源，提供了广泛的开源软件包，包括这个`cdsapi`库。第二句代码就是下载`cdsapi`库。



```
conda config --add channels conda-forge
conda install cdsapi

```

  运行上述代码，如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336529-89826931.png)


  我在第一次配置`cdsapi`库的时候，出现了如下图所示的报错；这种问题一般就是没有管理员权限导致的。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336616-997720898.png)


  因此，选择用管理员权限打开命令行，如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336553-630762112.png)


  随后，就配置好了`cdsapi`库；如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336581-1792484251.png)


  接下来，我们需要找到`.cdsapirc`文件，并将前面我们复制的`url`和`key`复制到其中。这里需要注意，这个`.cdsapirc`文件，原理上在配置完毕`cdsapi`库后，会自动出现在我们电脑中的`C:\Users\用户名`文件夹内；如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336593-1753379976.png)


  但是实际上，有的时候我们在上述文件夹内是看不到这个文件的；这样的话，我们可以在这个文件夹内新建一个`.txt`格式的文本文件，并将我们复制的`url`和`key`复制到其中，如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336561-212020139.png)


  随后，将这个`.txt`格式的文本文件重命名为`.cdsapirc`，如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336630-1668550045.png)


  随后，我们回到前面**ERA5**官方网站中，设置下载数据属性的那个网站，并选择最左侧的“**Show API request**”选项；如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336572-1707386693.png)


  随后，会出现一个**Python**代码；如下图所示。我们将这个代码复制到自己的**Python**语言的**IDE**中，执行代码即可。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336640-308263719.png)


  复制后如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336613-1243865863.png)


  随后，执行上述复制后的代码，如下图所示。可以看到，已经开始代码的下载了。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336474-2101105819.png)


  这里需要注意，下载的气象数据默认保存在**Python**代码所在的文件夹中；如下图所示。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336582-494971754.png)


  此外，我们通过上述方式获取的数据，其实也是一个向服务器发送的请求，也是需要首先处理请求、随后在**Python**中开始下载的；我们同样可以在“**Your requests**”页面中看到我们通过**Python**下载数据的请求。下图中，**Python**下载数据的请求处理数据为`0`，这个是因为对于同一个数据，我先用手动下载的方式提交过一次请求了，服务器处理之后我又用**Python**提交了一次请求，所以**Python**下载数据时就不用了再重新处理请求了。


![](https://img2024.cnblogs.com/blog/3080295/202412/3080295-20241204223336649-374771335.png)


  同时，当时还简单对比了一下手动下载和**Python**下载的速度差异，但是感觉两者速度差异不大，都不算很快；但是如果用手动下载的方法，提交并处理完毕请求后，用**IDM**等下载软件来下载，速度就会很快——至少比用浏览器自带的下载功能，或者**Python**下载，要明显快很多。


  至此，大功告成。


